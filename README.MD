[![License: GPL v2](https://img.shields.io/badge/License-GPL%20v2-blue.svg)](https://www.gnu.org/licenses/gpl-2.0)
[![Tested On](https://img.shields.io/badge/Tested%20On-Gentoo-brightgreen)](https://github.com/Cosmic-AU/SetGPUFanCurve/issues)

README.MD

# SetGPUFanCurve.sh

## Purpose

A simple bash script for changing the fan curve and other settings on the AMD RX 7900 XTX.

I wrote this script to allow me to control the fan speed on my **Sapphire Nitro+ Radeon RX 7900 XTX 24GB GDDR6 Video Card** running on **Gentoo Linux**. It might be useful to others, so I threw it up here. If you want to change the various profile settings, the **PROFILE DEFINITIONS** section in the script should be fairly self-explanatory.

Free to use, copy, extend, fork, with attribution. Cheers! ğŸš€

## Requirements

- **OS**: Linux with the `amdgpu` kernel module (tested on Gentoo with kernel 6.15+).
- **Privileges**: Run as root (`sudo`).
- **AMD Overdrive**: Enable via kernel parameter `amdgpu.ppfeaturemask` (see **Important Note** below).
- **Dependencies**: None (pure bash; assumes `amdgpu` sysfs paths exist).

## Usage

```
â–›â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–œ
â–Œâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—â–
â–Œâ•‘ Set GPU Fan Curve - Help                                                   â•‘â–
â–Œâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–
â–™â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–Ÿ
â–Œ                                                                              â–
â–Œ Usage:                                                                       â–
â–Œ                                                                              â–
â–Œ   sudo SetGPUFanCurve.sh [PROFILE]                                           â–
â–Œ                                                                              â–
â–Œ   PROFILE: Use one of the following fan curve profiles.                      â–
â–Œ            If omitted,'default' is used.                                     â–
â–Œ                                                                              â–
â–Œ Available Profiles:                                                          â–
â–Œ                                                                              â–
â–Œ   default    - General purpose safe default (aggressive cooling, fans always â–
â–Œ                spin).                                                        â–
â–Œ   gaming     - For AAA gaming: Aggressive ramping to keep GPU cool,          â–
â–Œ                prioritizing temperature over noise/fan wear.                 â–
â–Œ   general    - For non-graphics tasks (e.g., email, coding): Balanced        â–
â–Œ                cooling with slightly quieter fans.                           â–
â–Œ   away       - For unattended/background tasks: Quiet optimization with      â–
â–Œ                zero-RPM mode enabled for silence when possible.              â–
â–Œ   ai         - For AI/ML/LLM tasks: Aggressive cooling for sustained high    â–
â–Œ                GPU loads.                                                    â–
â–Œ   current    - Display current GPU fan settings without making changes.      â–
â–Œ                                                                              â–
â–Œâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â–
â–Œ                                                                              â–
â–Œ Examples:                                                                    â–
â–Œ                                                                              â–
â–Œ   sudo SetGPUFanCurve.sh gaming      # Apply gaming profile                  â–
â–Œ   sudo SetGPUFanCurve.sh away        # Apply away (quiet) profile            â–
â–Œ   sudo SetGPUFanCurve.sh             # Apply default profile                 â–
â–Œ                                                                              â–
â–Œ This script configures AMD GPU fan parameters via sysfs (/sys/class/drm/     â–
â–Œ card0/device/gpu_od/fan_ctrl). It requires root privileges and assumes       â–
â–Œ the amdgpu kernel module with overdrive features enabled.                    â–
â–Œ                                                                              â–
â–Œâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â–
â–Œ                                                                              â–
â–Œ Parameters Set:                                                              â–
â–Œ                                                                              â–
â–Œ   - fan_zero_rpm_enable: Enables/disables zero-RPM mode (0 or 1)             â–
â–Œ   - fan_minimum_pwm: Minimum fan speed % (15-100)                            â–
â–Œ   - fan_target_temperature: Base temp (Â°C) for curve activation              â–
â–Œ   - acoustic_limit_rpm_threshold: Max RPM cap for noise control              â–
â–Œ   - acoustic_target_rpm_threshold: Target RPM for quiet optimization         â–
â–Œ   - fan_curve: Multi-node Temperature-to-Fan Speed mapping                   â–
â–Œ                                                                              â–
â–Œâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â–
â–Œ                                                                              â–
â–Œ Important Note:                                                              â–
â–Œ                                                                              â–
â–Œ   To use this script, AMD overdrive features must be enabled by setting      â–
â–Œ   amdgpu.ppfeaturemask in your GRUB kernel line (or whatever bootloader      â–
â–Œ   you're using). This enables fan curve control. Examples:                   â–
â–Œ                                                                              â–
â–Œ   amdgpu.ppfeaturemask=0xfffd7fff                                            â–
â–Œ   amdgpu.ppfeaturemask=0xffffffff                                            â–
â–Œ                                                                              â–
â–Œ   Full example:                                                              â–
â–Œ   linux /kernel-6.15.3-gentoo-EPC-hypervisor root=... init=...               â–
â–Œ   amdgpu.ppfeaturemask=0xfffd7fff                                            â–
â–Œ                                                                              â–
â–Œ   For more details, see AMD's official documentation:                        â–
â–Œ   https://docs.kernel.org/gpu/amdgpu/module-parameters.html#ppfeaturemask    â–
â–Œ                                                                              â–
â–Œâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â–
â–Œ                                                                              â–
â–Œ                   This script was written to control a                       â–
â–Œ          Sapphire Nitro+ Radeon RX 7900 XTX 24GB GDDR6 Video Card            â–
â–Œ      It may work on other similar cards but this has not been tested!        â–
â–™â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–Ÿ
```

## Contributing / License

License: per GPL 2.0

Issues/PRs: Welcome! Open an issue on GitHub if you find bugs or have suggestions.

---

Script version: v1.0 (as of October 12, 2025)

Author: cosmic (Gentoo user)
